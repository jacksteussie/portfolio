import{k as F,l as P,o as I,p as H,v as Q,w as W,g as L,x as Z,H as $,y as V,z as D,A as k,C as j,B as ee,D as U,E as re,F as A,G as z,I as ne,J as fe,K as le,L as B,M as ae,N as ie,m as ue,O as X,P as se,Q as q,R as G,T as O,U as oe,V as te,W as ve,X as de}from"./ghmXt1ob.js";function _e(e,l){return l}function ce(e,l,a){for(var v=[],g=l.length,u,i=l.length,n=0;n<g;n++){let s=l[n];G(s,()=>{if(u){if(u.pending.delete(s),u.done.add(s),u.pending.size===0){var d=e.outrogroups;y(B(u.done)),d.delete(u),d.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var o=v.length===0&&a!==null;if(o){var f=a,t=f.parentNode;te(t),t.append(f),e.items.clear()}y(l,!o)}else u={pending:new Set(l),done:new Set},(e.outrogroups??=new Set).add(u)}function y(e,l=!0){for(var a=0;a<e.length;a++)ve(e[a],l)}var Y;function Ee(e,l,a,v,g,u=null){var i=e,n=new Map;{var o=e;i=I?H(Q(o)):o.appendChild(F())}I&&W();var f=null,t=fe(()=>{var c=a();return le(c)?c:c==null?[]:B(c)}),s,d=!0;function x(){_.fallback=f,pe(_,s,i,l,v),f!==null&&(s.length===0?(f.f&A)===0?q(f):(f.f^=A,b(f,null,i)):G(f,()=>{f=null}))}var r=P(()=>{s=L(t);var c=s.length;let T=!1;if(I){var h=Z(i)===$;h!==(c===0)&&(i=V(),H(i),D(!1),T=!0)}for(var R=new Set,m=re,N=ne(),C=0;C<c;C+=1){I&&k.nodeType===j&&k.data===ee&&(i=k,T=!0,D(!1));var M=s[C],p=v(M,C),E=d?null:n.get(p);E?(E.v&&U(E.v,M),E.i&&U(E.i,C),N&&m.unskip_effect(E.e)):(E=ge(n,d?i:Y??=F(),M,p,C,g,l,a),d||(E.e.f|=A),n.set(p,E)),R.add(p)}if(c===0&&u&&!f&&(d?f=z(()=>u(i)):(f=z(()=>u(Y??=F())),f.f|=A)),I&&c>0&&H(V()),!d)if(N){for(const[J,K]of n)R.has(J)||m.skip_effect(K.e);m.oncommit(x),m.ondiscard(()=>{})}else x();T&&D(!0),L(t)}),_={effect:r,items:n,outrogroups:null,fallback:f};d=!1,I&&(i=k)}function S(e){for(;e!==null&&(e.f&oe)===0;)e=e.next;return e}function pe(e,l,a,v,g){var u=l.length,i=e.items,n=S(e.effect.first),o,f=null,t=[],s=[],d,x,r,_;for(_=0;_<u;_+=1){if(d=l[_],x=g(d,_),r=i.get(x).e,e.outrogroups!==null)for(const p of e.outrogroups)p.pending.delete(r),p.done.delete(r);if((r.f&A)!==0)if(r.f^=A,r===n)b(r,null,a);else{var c=f?f.next:n;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),w(e,f,r),w(e,r,c),b(r,c,a),f=r,t=[],s=[],n=S(f.next);continue}if((r.f&O)!==0&&q(r),r!==n){if(o!==void 0&&o.has(r)){if(t.length<s.length){var T=s[0],h;f=T.prev;var R=t[0],m=t[t.length-1];for(h=0;h<t.length;h+=1)b(t[h],T,a);for(h=0;h<s.length;h+=1)o.delete(s[h]);w(e,R.prev,m.next),w(e,f,R),w(e,m,T),n=T,f=m,_-=1,t=[],s=[]}else o.delete(r),b(r,n,a),w(e,r.prev,r.next),w(e,r,f===null?e.effect.first:f.next),w(e,f,r),f=r;continue}for(t=[],s=[];n!==null&&n!==r;)(o??=new Set).add(n),s.push(n),n=S(n.next);if(n===null)continue}(r.f&A)===0&&t.push(r),f=r,n=S(r.next)}if(e.outrogroups!==null){for(const p of e.outrogroups)p.pending.size===0&&(y(B(p.done)),e.outrogroups?.delete(p));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||o!==void 0){var N=[];if(o!==void 0)for(r of o)(r.f&O)===0&&N.push(r);for(;n!==null;)(n.f&O)===0&&n!==e.fallback&&N.push(n),n=S(n.next);var C=N.length;if(C>0){var M=u===0?a:null;ce(e,N,M)}}}function ge(e,l,a,v,g,u,i,n){var o=(i&ae)!==0?(i&ie)===0?ue(a,!1,!1):X(a):null,f=(i&se)!==0?X(g):null;return{v:o,i:f,e:z(()=>(u(l,o??a,f??g,n),()=>{e.delete(v)}))}}function b(e,l,a){if(e.nodes)for(var v=e.nodes.start,g=e.nodes.end,u=l&&(l.f&A)===0?l.nodes.start:a;v!==null;){var i=de(v);if(u.before(v),v===g)return;v=i}}function w(e,l,a){l===null?e.effect.first=a:l.next=a,a===null?e.effect.last=l:a.prev=l}export{Ee as e,_e as i};
